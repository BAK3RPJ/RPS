<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Rock Paper Scissors</title>
  </head>
  <body>
    <div id="playerChoice">
      <h1 id="pickBtn"> Pick a sign! Any sign! </h1>
        <button id="rock" type="button">Rock!</button>
        <button id="paper" type="button">Paper!</button>
        <button id="scissors" type="button">Scissors!</button>
    </div>
    <p id="roundResult"></p>
    <script>

      let playerRock = document.querySelector("#rock").addEventListener("click", function(){writeToP("playerRock", computerPlay(calcNum()));});
      let playerPaper = document.querySelector("#paper").addEventListener("click", function(){writeToP("playerPaper", computerPlay(calcNum()))});;
      let playerScissors = document.querySelector("#scissors").addEventListener("click", function(){writeToP("playerScissors", computerPlay(calcNum()))});;
      let roundResult = document.getElementById("roundResult");
      let playerWin = 0;
      let computerWin = 0;

      function computerPlay(num) {
        if (num === 1) {
          return "Rock!";
        } else if (num === 2) {
          return "Paper!";
        } else {
          return "Scissors!";
        }
      }

      function calcNum() {
        return Math.floor((Math.random()*3) +1);
      }

      function playRound(playerSelection, computerSelection) {
        if (computerSelection === "Rock!") {
          if (playerSelection === "playerRock") {
            return "Oh! It's a tie!";
          } else if (playerSelection === "playerPaper") {
            return "You win! Paper beats Rock!";
          } else {
            return "You lose! Rock beats Scissors!";
          }
        } else if (computerSelection === "Paper!") {
          if (playerSelection === "playerRock") {
            return "You lose! Paper beats Rock!";
          } else if (playerSelection === "playerPaper") {
            return "Oh! It's a tie!";
          } else {
            return "You win! Scissors beats Paper!";
          }
        } else {
          if (playerSelection === "playerRock") {
            return "You win! Rock beats Scissors!";
          } else if (playerSelection === "playerPaper") {
            return "You lose! Scissors beats Paper!";
          } else {
            return "Oh! It's a tie!";
          }
        }
      }

// the function activated by the three sign buttons

      function writeToP(playerSelection, computerSelection) {
        document.getElementById("roundResult").innerHTML = game(playRound(playerSelection, computerSelection));
      }
/* Taking playRound as its argument in function writeToP,
simulates a round up to full 5 round play on button click */

      function game(round) {
        if ((playerWin + computerWin) === 5) {
          let winner;
          (playerWin > computerWin) ? winner = "Congratulations! You have beaten that confounded Computer!" :
              winner = "Blasted! The Confounded Computer has won again! Well, what did you expect? We have entered their era!";
          playerWin = 0;
          computerWin = 0;
          return winner;
        }
        if (round.includes("win")) {
          playerWin ++;
        } else if (round.includes("lose")) {
            computerWin ++;
        }
        return `${round}<br>The score is:<br>Player: ${playerWin}  Computer: ${computerWin}`;
      }

    </script>
  </body>
</html>
